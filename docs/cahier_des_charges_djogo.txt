üßæ CAHIER DES CHARGES ‚Äì
SYST√àME DE R√âSERVATION
DJOGO

1. Contexte
DJOGO est un espace d‚Äôateliers cr√©atifs pour enfants (6 √† 12 ans) et pour duos
parent-enfant.
Le syst√®me de r√©servation doit r√©pondre √† plusieurs contraintes sp√©cifiques
li√©es aux r√®gles internes de capacit√©, de gestion de formules, de privatisation
et de gestion des animateurs.
Les solutions SaaS existantes ne g√®rent pas correctement les capacit√©s
pond√©r√©es et les changements automatiques de formule.
L‚Äôobjectif est donc de cr√©er un syst√®me fiable, personnalisable et totalement
adapt√© aux r√®gles m√©tier de DJOGO.

2. Objectifs du syst√®me
2.1 Objectifs fonctionnels
Le syst√®me doit permettre :
1. De consulter les ateliers disponibles, leurs dates, horaires, prix et
descriptifs.
2. De r√©server un atelier pour un enfant seul, un duo parent-enfant, ou une
combinaison des deux.
3. De calculer automatiquement la capacit√© restante bas√©e sur une jauge
pond√©r√©e (avec quota d‚Äôenfants seuls max ou duos max)
4. De d√©tecter les combinaisons particuli√®res de participants et d‚Äôappliquer
automatiquement des formules tarifaires sp√©cifiques.
5. De privatiser automatiquement une session si certaines conditions sont
atteintes.
6. De collecter des informations individuelles pour chaque participant : nom,
√¢ge, taille, allergies √©ventuelles.
7. De g√©rer les paiements en ligne via XXX ?
8. D‚Äôenvoyer des emails automatiques (confirmation, rappel, annulation) (ou
de se connecter √† un syst√®me d‚Äôemailing via API / Make / Zapier)
9. De g√©rer les animateurs, leurs disponibilit√©s, leurs comp√©tences et leurs
affectations.
10. D‚Äô√©viter les conflits de planning (animateurs, salles).
11. De fournir un back-office complet pour g√©rer sessions, salles, animateurs,
r√®gles tarifaires et exports.

2.2 Objectifs non fonctionnels
1. Performance √©lev√©e, m√™me en p√©riode de forte affluence.
2. Interface mobile, web mais surtout user friendly.
3. S√©curit√© et conformit√© RGPD.
4. Aucune donn√©e bancaire stock√©e localement
5. Architecture √©volutive permettant d‚Äôajouter des r√®gles m√©tier/r√®gles
tarifaires.
6. Int√©gration possible dans Webflow via API ou iframe.

3. R√®gles m√©tier
3.1 Jauge pond√©r√©e (critique)
Le c≈ìur du syst√®me repose sur cette r√®gle :
Pond√©ration :
1 enfant seul = 1 unit√©
1 duo parent-enfant = 1.25 unit√©s
(la valeur 1.25 pourra √™tre ajust√©e facilement par DJOGO)

Capacit√© maximale pond√©r√©e par session :
‚û°Ô∏è 10 unit√©s max

Participants  Valeur   Total
6 enfants seuls  6 √ó 1    6
3 duos          3 √ó 1.25  3.75
Total 9.75 unit√©s ‚Üí OK

Exemple :
La capacit√© maximale d‚Äôune salle est d√©finie par un syst√®me pond√©r√© :
Enfant seul = 1 unit√©
Duo parent-enfant = 1.25 unit√©s
La capacit√© maximale d‚Äôune session est de 10 unit√©s.
La capacit√© restante doit √™tre recalcul√©e √† chaque ajout, modification ou
suppression de participant.
Aucune r√©servation ne peut d√©passer la capacit√© pond√©r√©e maximale.
Cette r√®gle s‚Äôapplique dans le front et dans le backend (double v√©rification).

3.2 Privatisation automatique
Une session devient automatiquement privatis√©e si une ou plusieurs conditions
sont atteintes :
- La jauge pond√©r√©e atteint la capacit√© maximale (10 unit√©s).
- Le nombre total de participants d√©passe un seuil pr√©d√©fini (valeur
  configurable).
- Une r√®gle personnalis√©e d√©clenche la privatisation (exemple : plus de X
  duos).
- Un administrateur force la privatisation depuis le back-office.

Cons√©quences de la privatisation :
- Application d‚Äôune formule tarifaire sp√©cifique (exemple : Pack Anniversaire).
- Blocage de toute nouvelle r√©servation par le public.
- Affichage d‚Äôun √©tat particulier dans le back-office.
- Optionnel : assignation automatique d‚Äôun animateur sp√©cifique.

La privatisation doit pouvoir √™tre annul√©e manuellement par un administrateur.

3.3 Changement automatique de formules
Le syst√®me doit analyser automatiquement les combinaisons de r√©servations
d‚Äôun m√™me atelier afin d‚Äôappliquer une formule tarifaire :

Exemples :
- 1 duo + 1 enfant seul d√©clenche automatiquement la formule Trio.
- 6 enfants seuls d√©clenchent la formule Groupe Enfants.
- 4 duos d√©clenchent la formule Duo Plus.
- La jauge √† 10 unit√©s d√©clenche le Pack Anniversaire (forfait).
- Les ateliers sp√©cifiques peuvent d√©clencher des formules ind√©pendantes.

Chaque formule doit √™tre :
- param√©trable dans le back-office,
- prioris√©e (certaines r√®gles doivent √™tre appliqu√©es avant d'autres),
- recalcul√©e dynamiquement si quelqu‚Äôun annule ou modifie sa r√©servation.

3.4 Gestion des animateurs
R√®gles √† respecter :
- Un animateur ne peut g√©rer qu‚Äôun seul atelier par cr√©neau.
- Un animateur ne peut √™tre affect√© qu‚Äôaux ateliers correspondant √† ses
  comp√©tences (cat√©gories DJOGO : Inventeurs, Artistes, Gourmets).
- Certains ateliers peuvent n√©cessiter deux animateurs.
- Le syst√®me doit emp√™cher tout conflit d‚Äôagenda.
- Le planning animateur doit √™tre consultable par jour, semaine et mois.

3.5 Gestion des salles
Chaque atelier est associ√© √† une salle sp√©cifique, qui poss√®de :
- une capacit√© pond√©r√©e maximale d√©finie,
- des contraintes √©ventuelles (√©quipement, mat√©riel‚Ä¶).

Le syst√®me doit emp√™cher plusieurs ateliers d‚Äôutiliser la m√™me salle au m√™me
cr√©neau.

4. Flux utilisateur
1. L‚Äôutilisateur consulte les ateliers.
2. Il s√©lectionne un atelier, une date et un cr√©neau.
3. Le syst√®me affiche la capacit√© pond√©r√©e restante.
4. L‚Äôutilisateur choisit son type de r√©servation (enfant seul, duo).
5. Le syst√®me calcule la capacit√© demand√©e et v√©rifie la jauge.
6. Le syst√®me applique automatiquement une formule tarifaire si n√©cessaire.
7. L‚Äôutilisateur renseigne les informations des participants.
8. L‚Äôutilisateur proc√®de au paiement (Stripe).
9. Le syst√®me confirme la r√©servation et envoie un email.
10. Un rappel est envoy√© la veille de l‚Äôatelier.

5. Back-office
5.1 Modules principaux
- Gestion des ateliers
- Gestion des cr√©neaux
- Gestion des animateurs
- Gestion des salles
- Gestion des r√®gles tarifaires
- Vue planning globale (atelier, animateur, salles)
- Exports CSV/Excel
- Edition et modification des r√©servations
- For√ßage manuel des formules ou privatisation

5.2 Gestion des r√®gles tarifaires
L‚Äôadministrateur doit pouvoir :
- cr√©er une r√®gle,
- d√©finir les conditions d‚Äôactivation,
- d√©finir la formule tarifaire associ√©e,
- d√©finir la priorit√© de la r√®gle,
- activer / d√©sactiver une r√®gle.

Exemples de conditions possibles :
- jauge ‚â• X unit√©s
- nombre d‚Äôenfants ‚â• X
- nombre de duos ‚â• X
- combinaison enfant seul + duo
- atelier sp√©cifique d√©clencheur

6. API (exigences)
Endpoints minimums :
GET /ateliers
GET /ateliers/:id/disponibilites
POST /reservations
PUT /reservations/:id
DELETE /reservations/:id
GET /animateurs
GET /salles
POST /rules/apply
GET /sessions/:id/recalculate
POST /sessions/:id/privatisation

Le backend doit recalculer :
- la jauge pond√©r√©e
- la formule active
- le tarif final
- les conflits animateur/salle

7. S√©curit√©
- H√©bergement en HTTPS obligatoire
- Authentification administrateur prot√©g√©e par MFA ou √©quivalent
- Conformit√© RGPD
- Donn√©es personnelles chiffr√©es en base
- Stripe obligatoire pour les paiements
- Journalisation des actions critiques (modifications r√©servations,
  privatisation, prix)

8. Gestion des cas limites
Le syst√®me doit g√©rer :
- des r√©servations simultan√©es
- l‚Äôannulation d‚Äôune r√©servation entra√Ænant un changement de formule
- le passage d‚Äôune session privatis√©e √† non privatis√©e
- une modification de participants qui d√©passe la jauge
- l‚Äôabsence d‚Äôanimateur disponible sur un cr√©neau
- le changement manuel d‚Äôun animateur par un administrateur

9. Roadmap de d√©veloppement
Phase 1 : Base Technique
- Architecture backend
- Base de donn√©es
- Gestion de la jauge pond√©r√©e
- Cr√©ation et gestion de sessions
- Paiement Stripe
- Emails automatiques

Phase 2 : Gestion R√®gles et Privatisation
- Module r√®gles tarifaires
- D√©tection des combinaisons
- Privatisation automatique
- Interface admin r√®gles

Phase 3 : Animateurs et Salles
- Planning animateurs
- Affectation automatique/manuel
- Anti-conflit
- Planning salles

Phase 4 : Finalisation
- Export CSV/Excel
- Dashboard global
- Tests (unitaires et fonctionnels)
- Mise en production

10. Livrables
- Code source document√©
- Documentation API
- Back-office fonctionnel
- Interfaces utilisateur finalis√©es
- Jeux de tests
- Proc√©dure d‚Äôinstallation
- Proc√©dure de d√©ploiement
- Support de formation

11. Phase 2 ‚Äì Modules op√©rationnels et outils internes
Cette phase vient compl√©ter le syst√®me de r√©servation et de gestion des
ateliers par des fonctionnalit√©s internes de gestion et de pilotage de l‚Äôactivit√© :
stock, mat√©riel, B2B, qualit√© des salles, formation et droits d‚Äôacc√®s.

11.1 Gestion des stocks (Caf√© et consommables ateliers)
Objectif : disposer d‚Äôun module centralis√© de gestion des stocks pour :
- les produits du caf√© (boissons, snacks, mati√®res premi√®res),
- les consommables des ateliers (bois, peinture, vis, colles, papier,
  ingr√©dients, etc.).

11.1.1 Concepts
Article
- Identifiant
- Nom
- Cat√©gorie (Caf√©, Atelier, Autre)
- Sous-cat√©gorie (exemple : Boisson, Snack, Aliment sec, Mat√©riel bois,
  Mat√©riel arts plastiques)
- Unit√© (pi√®ce, litre, kg, paquet, etc.)
- Stock minimum (seuil d‚Äôalerte)
- Stock initial
- Fournisseur principal (optionnel)
- Prix d‚Äôachat moyen (optionnel)

Magasin / Emplacement de stockage
Exemples : R√©serve Caf√©, R√©serve Ateliers, Local Principal, Salle X si
stockage local
Permet de distinguer plusieurs stocks physiques.

Mouvement de stock
- Entr√©e (livraison fournisseur, correction inventaire)
- Sortie (consommation atelier, vente caf√©, casse, perte)
- Transfert entre emplacements
- Date, quantit√©, motif, utilisateur responsable

11.1.2 Fonctionnalit√©s
- Consultation du stock par article, filtre par cat√©gorie, par emplacement.
- Saisie manuelle d‚Äôentr√©es et de sorties de stock.
- Gestion d‚Äôinventaires physiques p√©riodiques (inventaire global ou par zone).
- Alerte sur stock bas (par mail ou dans le back-office) lorsqu‚Äôun article
  passe sous son seuil.
- Historique des mouvements de stock par article.
Pour les ateliers :
- Association d‚Äôune ¬´ fiche consommables ¬ª √† chaque type d‚Äôatelier (liste
  d‚Äôarticles + quantit√©s par participant).
- Option future : pr√©vision de consommation √† partir des r√©servations et
  d√©duction automatique ou semi-automatique des stocks apr√®s la
  session.
- Exports CSV/Excel du stock et des mouvements.

11.1.3 Droits
- Administrateur : acc√®s complet (configuration, articles, mouvements,
  inventaires).
- Responsable/Manager : gestion des stocks et inventaires.
- R√¥le Caf√© : gestion des articles et mouvements li√©s au caf√© uniquement.
- Animateur : en option, d√©claration simple de consommation d‚Äôarticles pour
  un atelier (interface simplifi√©e).

11.2 Inventaire des salles et √©tat du mat√©riel
Objectif : disposer d‚Äôune vision claire de l‚Äô√©quipement de chaque salle et de son
√©tat, avec suivi dans le temps.

11.2.1 Concepts
Salle
- Identifiant, nom, type (Gastronomie, Menuiserie, Arts, etc.)
- Capacit√© (r√©servations, d√©j√† d√©finie en phase 1)
- Liste de mat√©riel associ√©.

Mat√©riel
- Nom
- Type (outil, meuble, √©quipement sp√©cifique)
- Quantit√©
- Salle associ√©e (ou zone)
- √âtat (OK, √Ä v√©rifier, Hors service)
- Derni√®re date de contr√¥le
- Commentaire

Ticket / demande de maintenance
- Lien √† un mat√©riel ou √† une salle
- Description du probl√®me
- Date de cr√©ation
- Statut (ouvert, en cours, r√©solu)
- Responsable suivi

11.2.2 Fonctionnalit√©s
- Liste et fiche d√©taill√©e par salle avec inventaire du mat√©riel.
- Mise √† jour de l‚Äô√©tat du mat√©riel (OK / √Ä v√©rifier / HS).
- Cr√©ation rapide de tickets de maintenance depuis la fiche salle ou la fiche
  mat√©riel.
- Historique des interventions sur un mat√©riel ou une salle.
- Export inventaire par salle.

11.2.3 Int√©gration
- Lien avec la notation de propret√© des salles (voir 11.4) pour croiser qualit√©,
  propret√© et incidents mat√©riels.
- Possibilit√© √† terme de g√©n√©rer des rapports mensuels de qualit√© par salle.
- Possibilit√© √† terme de g√©n√©rer des rapports mensuels de qualit√© par salle.

11.3 Boutique priv√©e B2B / Associations
Objectif : proposer un espace de commande r√©serv√© aux clients professionnels
(entreprises, associations, √©coles, etc.).

11.3.1 Acc√®s
- Acc√®s restreint par compte (login/mot de passe) et r√¥le ¬´ Client B2B ¬ª.
- Validation des comptes B2B par un Administrateur ou un Responsable.

11.3.2 Produits et offres
Catalogue B2B distinct du site grand public ou filtr√© :
- Privatisations d‚Äôateliers
- Packs anniversaires
- Packs ateliers pour groupes scolaires
- Location de salles
- Prestations sur mesure

Tarification sp√©cifique B2B :
- Prix par pack
- Prix d√©gressifs possibles par volume
- Possibilit√© de g√©rer des grilles tarifaires sp√©cifiques par segment
  (association, entreprise, √©cole).

11.3.3 Parcours B2B
- Le client B2B se connecte.
- Il consulte le catalogue B2B.
- Il ajoute des produits B2B √† un panier.
Deux options de validation possibles (√† pr√©ciser) :
- Mode devis : cr√©ation d‚Äôune demande de devis √† valider par DJOGO.
- Mode commande directe : validation avec paiement en ligne ou
  paiement diff√©r√© (√† d√©finir).
- Confirmation de commande / devis envoy√©e par email.
- Export des commandes B2B pour facturation (CSV/Excel ou int√©gration
  externe).

11.4 Notation de la propret√© des salles
Objectif : suivre la qualit√© de la propret√© et de la remise en √©tat des salles apr√®s
chaque session.

11.4.1 Fonctionnement
- √Ä la fin d‚Äôun cr√©neau d‚Äôatelier, l‚Äôanimateur ou le responsable peut remplir
  une courte fiche d‚Äô√©valuation pour la salle utilis√©e :
  - Note de propret√© (√©chelle √† d√©finir, par exemple 1 √† 5).
  - Commentaire facultatif (exemple : point d‚Äôattention, t√¢che persistante,
    mat√©riel √† nettoyer).
  - Possibilit√© de cocher si une intervention m√©nage est n√©cessaire.
- Les responsables peuvent √©galement saisir une notation lors de contr√¥les
  ponctuels.
- Lorsque les responsables notent plus d‚Äôune fois le m√™me animateur en
  faute sur la propret√© de sa salle un mail automatique est envoy√© avec un
  rappel + un lien vers une formation e-learning propret√©

11.4.2 Exploitation
- Dashboard par salle avec moyenne des notes sur une p√©riode.
- Liste des sessions avec note faible (par exemple < 3) √† traiter en priorit√©.
- Liaison avec les tickets de maintenance si un commentaire signale un
  probl√®me mat√©riel.

11.5 Espace de formation / ¬´ Drive ¬ª avec IA
Objectif : centraliser toutes les ressources de formation et de proc√©dures pour
les animateurs, responsables et personnel caf√©, avec un moteur de recherche
assist√© par IA pour faciliter l‚Äôonboarding et la mise √† jour des pratiques.

11.5.1 Contenus
- Documents texte : proc√©dures, fiches ateliers, check-lists, r√®gles d‚Äôhygi√®ne,
  consignes de s√©curit√©.
- Documents m√©dia : vid√©os de d√©monstration, supports de formation.
- Fiches ¬´ process DJOGO ¬ª : accueil, check-in, gestion incidents, fin de
  journ√©e, etc.

11.5.2 Fonctionnalit√©s
- Organisation des contenus en cat√©gories (Ateliers, S√©curit√©, Caf√©, RH,
  Process DJOGO).
- Moteur de recherche sur l‚Äôensemble des documents.
- Assistant bas√© sur l‚ÄôIA (chat interne) permettant :
  - de r√©pondre aux questions des animateurs √† partir du corpus interne
    (exemple : ‚ÄúComment pr√©parer l‚Äôatelier X ?‚Äù),
  - de proposer des r√©sum√©s ou des checklists.
- Historique des contenus consult√©s par utilisateur (pour tracer l‚Äôonboarding).
- Option ult√©rieure : petits modules de quiz ou validation de compr√©hension.

11.5.3 Permissions
- Animateur : acc√®s aux contenus pertinents pour son r√¥le (fiches atelier,
  proc√©dures terrain).
- Responsable : acc√®s √©largi, gestion d‚Äôune partie des contenus.
- Caf√© : acc√®s aux proc√©dures li√©es au caf√© et √† l‚Äôaccueil.
- Administrateur : acc√®s complet, cr√©ation, modification, suppression de
  contenus, gestion de l‚ÄôIA (indexation, sources, etc.).

La solution technique pour l‚ÄôIA pourra √™tre externe (API) ou interne, mais
l‚Äôexigence principale est d‚Äôinterroger uniquement le corpus DJOGO (pas d‚Äôopen
web).

11.6 R√¥les et gestion des acc√®s
Objectif : structurer les permissions sur l‚Äôensemble du syst√®me selon le type
d‚Äôutilisateur.

11.6.1 R√¥les principaux
- Animateur
- Responsable / Manager
- Caf√©
- Administrateur

11.6.2 Droits indicatifs par r√¥le
Les droits pr√©cis seront √† affiner, mais la logique de base pourrait √™tre :

Animateur :
- Consultation de son planning d‚Äôateliers.
- Consultation des fiches ateliers et proc√©dures dans l‚Äôespace formation.
- Saisie des √©valuations de propret√© de salle.
- Saisie simple d‚Äôincidents mat√©riels (tickets).
- √âventuellement, d√©claration de consommation de consommables
  (interface simplifi√©e).

Responsable / Manager :
- Gestion des plannings (ateliers, animateurs, salles).
- Validation / ajustement des r√©servations complexes.
- Gestion des stocks (tous ou certains articles).
- Gestion de l‚Äôinventaire mat√©riel.
- Acc√®s aux rapports (propret√©, qualit√©, remplissage, etc.).
- Lecture et √©ventuellement modification de certaines r√®gles tarifaires.

Caf√© :
- Gestion des stocks et mouvements li√©s au caf√©.
- Acc√®s aux ventes / consommations li√©es au caf√©.
- Consultation des proc√©dures caf√© dans l‚Äôespace formation.

Administrateur :
- Acc√®s complet √† tous les modules.
- Gestion des r√¥les et des utilisateurs.
- Gestion des r√®gles tarifaires avanc√©es (privatisation, formules).
- Gestion et configuration du module IA (sources, indexation).
- Param√©trage global du syst√®me.

Les droits doivent √™tre g√©r√©s via un syst√®me de permissions exploitable
techniquement (par exemple, par ressource et par action : lecture, √©criture,
suppression, gestion).

11.7 Suivi des manquements de propret√© par animateur et d√©clenchement d‚Äôune formation
Objectif : suivre les manquements r√©currents √† la propret√© par animateur et
d√©clencher automatiquement une action de formation lorsque le probl√®me se
r√©p√®te.

11.7.1 Enregistrement des manquements
Pr√©-requis : la notation de propret√© des salles (section 11.4) est en place.
Lorsqu‚Äôun responsable ou manager saisit une notation de propret√© pour une
salle, il doit pouvoir :
- Noter la propret√© (√©chelle d√©finie, par exemple de 1 √† 5).
- Indiquer si la propret√© est jug√©e insuffisante.
- Option : s√©lectionner l‚Äôanimateur responsable de la s√©ance, si ce n‚Äôest pas
  d√©j√† li√© √† la session.

Chaque incident de propret√© insuffisante est enregistr√© comme un
‚Äúmanquement de propret√©‚Äù associ√© :
- √† la salle,
- √† la session,
- √† l‚Äôanimateur correspondant,
- √† la date et l‚Äôheure,
- au responsable ayant r√©alis√© la notation,
- √† un √©ventuel commentaire.

11.7.2 R√®gle de d√©clenchement automatique
Le syst√®me doit surveiller, par animateur, le nombre de manquements
enregistr√©s sur une p√©riode.

R√®gle de base (param√©trable) :
Si un m√™me animateur est not√© en faute sur la propret√© plus d‚Äôun certain
nombre de fois (par exemple 2 ou 3 fois) sur une p√©riode d√©finie (par
exemple 30 ou 60 jours), alors une action automatique est d√©clench√©e.

L‚Äôaction automatique consiste √† :
- envoyer un email √† l‚Äôanimateur concern√©,
- avec un rappel des attentes DJOGO concernant la propret√©,
- un r√©capitulatif des s√©ances concern√©es (dates, salles),
- un lien vers une formation e-learning d√©di√©e √† la propret√© et au rangement
  en salle, h√©berg√©e dans l‚Äôespace de formation (section 11.5).

Le mail doit √™tre bas√© sur un template modifiable dans l‚Äôadmin.

Les param√®tres suivants doivent √™tre configurables :
- nombre de manquements avant d√©clenchement,
- p√©riode d‚Äôobservation (en jours),
- contenu du mail (sujet, corps, lien vers la formation).

Une trace de l‚Äôenvoi (date, destinataire, motif) doit √™tre enregistr√©e dans le
syst√®me.

11.8 Feedback de s√©ance par les animateurs et g√©n√©ration d‚Äôune liste de t√¢ches
Objectif : permettre aux animateurs de remonter les probl√®mes ou besoins
constat√©s √† la fin de chaque s√©ance, et g√©n√©rer automatiquement une liste de
choses √† faire exploitable par les responsables.

11.8.1 Formulaire de fin de s√©ance
Pour chaque session d‚Äôatelier, l‚Äôanimateur doit avoir acc√®s √† un formulaire de
"bilan de s√©ance", comprenant a minima :
- Note globale de la s√©ance (optionnel).
- Champs libres pour remarques :
  - probl√®mes rencontr√©s (organisation, timing, participants, mat√©riel),
  - id√©es d‚Äôam√©lioration,
  - incidents √©ventuels (non s√©curit√©).
- Section sp√©cifique ‚ÄúManques et besoins‚Äù :
  - mat√©riel manquant,
  - consommables √† recompl√©ter,
  - √©quipements √† v√©rifier ou remplacer.

Ce formulaire est li√© √† :
- la session,
- la salle,
- l‚Äôatelier,
- l‚Äôanimateur.

Le remplissage peut √™tre encourag√© syst√©matiquement, sans √™tre bloquant
pour l‚Äôusage du planning.

11.8.2 Transformation en liste de t√¢ches
Le syst√®me doit convertir automatiquement les √©l√©ments de ‚Äúmanques et
besoins‚Äù en t√¢ches dans un module de to-do interne.

Concept ‚ÄúT√¢che‚Äù g√©n√©rique :
- Identifiant
- Titre
- Description
- Origine (feedback animateur, propret√©, inventaire, r√©union, etc.)
- Priorit√© (param√©trable ou attribu√©e automatiquement : basse, normale,
  haute)
- Type (maintenance, r√©assort consommables, propret√© renforc√©e,
  am√©lioration process)
- Salle concern√©e (si applicable)
- Atelier concern√© (si applicable)
- Personne ou r√¥le responsable (option : Responsable, Caf√©, Maintenance)
- Statut (√† faire, en cours, termin√©, abandonn√©)
- Date de cr√©ation
- Date d‚Äô√©ch√©ance (optionnelle)
- Historique des changements

Les responsables doivent disposer d‚Äôune vue consolid√©e de toutes les t√¢ches,
filtrable par :
- origine (feedback animateur),
- salle,
- atelier,
- type,
- statut,
- personne assign√©e.

Les t√¢ches cr√©√©es automatiquement depuis les feedbacks de s√©ance doivent
√™tre identifiables clairement comme telles.

11.9 Notes de r√©union et assignation de t√¢ches
Objectif : permettre de saisir les comptes-rendus de r√©union et de convertir les
d√©cisions en t√¢ches assign√©es aux personnes concern√©es, dans le m√™me
syst√®me de t√¢ches que celui utilis√© pour les feedbacks et incidents.

11.9.1 Saisie des r√©unions
Cr√©ation d‚Äôun concept ‚ÄúR√©union‚Äù avec :
- Identifiant
- Titre de la r√©union (exemple : R√©union √©quipe animateurs ‚Äì Semaine 12)
- Date et heure
- Participants (liens vers utilisateurs)
- Type de r√©union (√©quipe, comit√©, direction, caf√©, B2B, etc.)
- Notes globales (zone de texte libre)

L‚Äôinterface doit permettre :
- de saisir un compte-rendu structur√© ou libre,
- de tracer ce qui a √©t√© discut√©.

11.9.2 Cr√©ation de t√¢ches √† partir de la r√©union
Int√©gration avec le mod√®le de ‚ÄúT√¢che‚Äù d√©fini en 11.8 :
Depuis l‚Äô√©cran de r√©union, un responsable doit pouvoir cr√©er des t√¢ches li√©es √†
cette r√©union :
- titre de la t√¢che,
- description,
- personne assign√©e (animateur, responsable, caf√©, administrateur),
- date d‚Äô√©ch√©ance,
- priorit√©,
- lien √† la r√©union source.

Ces t√¢ches alimentent le m√™me module de to-do que les t√¢ches g√©n√©r√©es :
- par les feedbacks animateurs,
- par les incidents de propret√©,
- par les inventaires.

Un lien doit exister de la t√¢che vers la r√©union m√®re, afin de pouvoir remonter
au contexte.

11.9.3 Vue unifi√©e des t√¢ches
Le syst√®me doit proposer une vue globale de toutes les t√¢ches, avec filtrage
par :
- origine (r√©union, feedback, incident de propret√©, stock, autre),
- statut,
- personne assign√©e,
- salle, atelier, type.

Cette vue pourra servir de base √† la gestion op√©rationnelle hebdomadaire.

11.10 Notifications automatiques aux animateurs sur les effectifs de leur salle
Objectif : informer les animateurs √† l‚Äôavance du nombre de participants
attendus dans leur salle, et les pr√©venir en cas de modification significative peu
de temps avant la s√©ance.

11.10.1 Rappel 48 heures avant la s√©ance
Pour chaque session d‚Äôatelier planifi√©e, le syst√®me doit envoyer
automatiquement un email √† l‚Äôanimateur principal (et √©ventuellement au co-
animateur s‚Äôil y en a un) 48 heures avant l‚Äôhoraire de d√©but de la s√©ance.

Contenu minimal du mail :
- Objet : rappel s√©ance dans 48 heures.
- Nom de l‚Äôatelier.
- Date et heure de la s√©ance.
- Salle attribu√©e.
- Nombre total de participants attendus.
- R√©partition par type :
  - nombre d‚Äôenfants seuls,
  - nombre de duos parent-enfant (et donc total de personnes physiques).
- Rappel √©ventuel de consignes importantes (exemple : heure d‚Äôarriv√©e,
  check-list rapide, lien vers la fiche atelier).

Param√®tres configurables :
- D√©lai avant la s√©ance (par d√©faut 48 heures).
- Mod√®le d‚Äôemail (objet et corps du message).
- Liste des champs inclus dans le mail (base : atelier, salle, participants).

Conditions :
- L‚Äôemail ne doit √™tre envoy√© qu‚Äôaux animateurs assign√©s √† la session.
- Si l‚Äôassignation de l‚Äôanimateur change apr√®s l‚Äôenvoi, cela n‚Äôannule pas le
  mail d√©j√† envoy√©, mais le nouvel animateur sera pris en compte pour la
  notification √† 24 heures (section suivante).

11.10.2 Notification 24 heures avant en cas de changement
Le syst√®me doit d√©tecter les modifications intervenues entre le moment du mail
envoy√© √† 48 heures et la veille de la s√©ance (24 heures avant).

Les modifications √† prendre en compte sont :
- ajout ou suppression de participants,
- changement significatif de la structure des r√©servations (plus de duos,
  moins d‚Äôenfants seuls, etc.),
- annulation de la s√©ance,
- changement de salle.

R√®gle de d√©clenchement :
- Si au moins un changement est survenu dans la liste des participants ou
  dans la salle, le syst√®me envoie un nouvel email r√©capitulatif 24 heures
  avant l‚Äôhoraire de d√©but.
- Si aucun changement n‚Äôa eu lieu, aucun email compl√©mentaire n‚Äôest envoy√©.

Contenu minimal du mail √† 24 heures :
- Objet : mise √† jour s√©ance dans 24 heures.
- Nom de l‚Äôatelier.
- Date et heure.
- Salle (version √† jour).
- Nombre de participants attendus mis √† jour.
- R√©partition par type (enfants seuls, duos, total personnes).
- Rappel succinct des principaux changements par rapport √† la situation √† 48
  heures (si possible) :
  Exemple : "+2 enfants seuls, -1 duo" ou "Salle modifi√©e : √©tait Salle A,
  devient Salle B".

Param√®tres configurables :
- D√©lai avant la s√©ance (par d√©faut 24 heures).
- Mod√®le d‚Äôemail.
- Types de changements d√©clencheurs (au minimum, changement du total de
  participants ou de la salle).

11.10.3 Points techniques
Un job planifi√© (cron ou √©quivalent) devra √™tre ex√©cut√© r√©guli√®rement pour :
- identifier les s√©ances approchant de 48 heures,
- envoyer les mails correspondants,
- marquer qu‚Äôun mail 48 heures a √©t√© envoy√©,
- identifier les s√©ances approchant des 24 heures,
- v√©rifier si des modifications ont eu lieu depuis l‚Äô√©tat m√©moris√© √† 48
  heures,
- envoyer le mail de mise √† jour le cas √©ch√©ant.

Il est n√©cessaire de conserver un ‚Äúsnapshot‚Äù de l‚Äô√©tat de la session au
moment de l‚Äôenvoi des mails √† 48 heures :
- nombre de participants par type,
- salle,
- animateur(s).

Ce snapshot servira de base de comparaison pour d√©terminer s‚Äôil y a eu
des changements.

En cas de changement d‚Äôanimateur entre les 48 heures et les 24 heures :
- le nouvel animateur doit recevoir le mail √† 24 heures,
- l‚Äôancien animateur ne re√ßoit plus de notification pour cette s√©ance √†
  partir du moment o√π il est d√©sassign√©.

Les emails envoy√©s doivent √™tre enregistr√©s dans des logs (type,
destinataire, s√©ance, date et heure d‚Äôenvoi) pour diagnostic et tra√ßabilit√©.

11.11 Tableau Administrateur : suivi des co√ªts consommables par enfant
Objectif : permettre √† l‚Äôadministrateur de v√©rifier que le co√ªt total des
consommables utilis√©s par participant pour chaque atelier ne d√©passe pas une
limite d√©finie (par exemple 3 euros par enfant).

11.11.1 Donn√©es n√©cessaires
Pour chaque atelier, le syst√®me doit disposer :
- de la liste des consommables utilis√©s,
- de la quantit√© consomm√©e par participant (ou par duo),
- du co√ªt unitaire de chaque consommable (d√©fini dans le module stock),
- du nombre r√©el de participants (enfants seuls et duos convertis en
  participants physiques).

11.11.2 Calcul attendu
Co√ªt total consommables pour un atelier :
Somme(consommables utilis√©s * co√ªt unitaire * quantit√© par participant *
nombre de participants concern√©s)

Co√ªt par enfant :
Co√ªt total consommables / nombre de participants enfants

Le syst√®me doit comparer ce co√ªt au seuil d√©fini dans la configuration globale
(par d√©faut 3 ‚Ç¨).

11.11.3 Fichier / tableau √† produire
L‚Äôadministrateur doit pouvoir exporter un fichier (CSV ou Excel) contenant, pour
chaque session :
- Identifiant de la session
- Atelier
- Date et heure
- Animateur
- Nombre d‚Äôenfants pr√©sents
- Nombre de duos pr√©sents
- Total participants physiques
- Liste des consommables utilis√©s
- Co√ªt total consommables
- Co√ªt consommables par enfant
- √âtat : conforme / d√©passement seuil

Le tableau doit √©galement pr√©senter une vue group√©e par atelier (moyenne
mensuelle), et une vue group√©e par responsable.

11.11.4 Alertes automatiques
Si un atelier d√©passe la limite de co√ªt d√©finie :
- un signal visuel doit appara√Ætre dans le back-office,
- une alerte email peut √™tre envoy√©e √† l‚Äôadministrateur (option configur√©e).

11.12 Gestion des paies des animateurs (bas√©e sur le temps total)
Objectif : calculer automatiquement la r√©mun√©ration des animateurs en fonction
de leur pr√©sence totale, incluant :
- ateliers anim√©s,
- formations internes (e-learning ou pr√©sentiel),
- r√©unions,
- t√¢ches internes valid√©es (option),
- pr√©sences administratives ou d‚Äôam√©nagement.

11.12.1 Donn√©es n√©cessaires
Pour chaque animateur, le syst√®me doit enregistrer :
- la dur√©e de chaque atelier anim√© (heure de d√©but, de fin),
- le temps pass√© en formation (issu de l‚Äôespace Drive),
- la pr√©sence √† des r√©unions (module r√©union),
- le temps consacr√© √† des t√¢ches op√©rationnelles (si besoin),
- un taux horaire pr√©configur√© par animateur (modifiable en admin).

11.12.2 Calcul attendu
Total heures =
Somme(heures ateliers) + Somme(heures formations) + Somme(heures
r√©unions) + Somme(heures internes)

Paie brute =
Total heures * taux horaire

11.12.3 Fichier / tableau √† produire
Export mensuel (CSV ou Excel) contenant :
- Nom de l‚Äôanimateur
- Nombre d‚Äôateliers effectu√©s
- Total heures ateliers
- Total heures formation
- Total heures r√©unions
- Total heures internes
- Total heures cumul√©es
- Taux horaire
- R√©mun√©ration du mois
- Validation responsable (oui/non)

Possibilit√© d‚Äôexport global ou par animateur.
Une vue synth√©tique mensuelle doit √™tre affich√©e dans l‚Äôadmin.

11.13 Gestion de la R&D (Ateliers, mat√©riel, artisans et √©tats d‚Äôavancement)
Objectif : suivre la cr√©ation et l‚Äô√©volution des ateliers DJOGO, les collaborations
avec artisans et experts, ainsi que les √©tapes de validation internes.

11.13.1 √âtats d‚Äôavancement
Chaque atelier en d√©veloppement doit suivre un pipeline pr√©d√©fini :
1. Th√©orie (papier)
2. Pr√©-production (validation expert)
3. Production (design ou test en cours)
4. Validation finale (atelier pr√™t)
5. Mise en exploitation

Ces √©tapes doivent √™tre configurables dans l‚Äôadministrateur.

11.13.2 Informations √† stocker pour chaque atelier R&D
- Nom de l‚Äôatelier
- Responsable interne (manager)
- Artisan associ√© (si applicable)
- Date d‚Äôentr√©e en pipeline
- √âtape en cours
- Historique des actions :
  - validations,
  - achats,
  - tests,
  - remont√©es animateurs
- Documents associ√©s (PDF, images, proc√©dures)

11.13.3 Actions possibles
- Changer l‚Äô√©tape de l‚Äôatelier (workflow)
- Ajouter une note ou un commentaire interne
- Ajouter un livrable (image, fichier)
- Assigner une t√¢che issue de la R&D (module To-do)
- Ajouter l‚Äôintervention d‚Äôun artisan avec :
  - nom et coordonn√©es,
  - co√ªt d‚Äôintervention,
  - nature de la collaboration.

11.13.4 Tableau administrateur R&D
L‚Äôadministrateur doit disposer d‚Äôun tableau centralis√© listant :
- Nom atelier
- Responsable
- Artisan
- √âtape actuelle
- Date prochaine action attendue
- Probl√®mes remont√©s
- T√¢ches en cours
- Documents disponibles
- Export CSV/Excel disponible.

11.14 Int√©gration avec le module de t√¢ches internes
Toutes les sections ajout√©es ci-dessus doivent s‚Äôint√©grer avec le module de
t√¢ches d√©fini en section 11.8.

Dans le module t√¢ches, les origines suivantes doivent √™tre possibles :
- feedback animateur
- r√©union
- stock consommables
- inventaire salle
- R&D atelier
- qualit√© / propret√©
- note responsable

Chaque t√¢che doit √™tre :
- assign√©e √† une personne ou un r√¥le,
- suivie dans le temps,
- historis√©e,
- filtrable dans des vues administrateur et manager.

Voici l‚Äôajout complet, clair, structur√© et parfaitement int√©gr√© pour le module
Caf√©, dans le m√™me style que l‚Äôensemble du Cahier des Charges complet.
Tu peux le placer en Section 11.15 dans la partie ‚ÄúOp√©rations internes‚Äù.

11.15 Module Caf√© : gestion op√©rationnelle quotidienne
Objectif : fournir au personnel du caf√© un outil de suivi et de contr√¥le simple,
structur√© et tra√ßable, couvrant l‚Äôhygi√®ne, les sorties produits, les contr√¥les
obligatoires et les consommables alimentaires.

Ce module doit permettre aux op√©rateurs Caf√© et aux responsables d‚Äôavoir une
vue consolid√©e de l‚Äô√©tat du caf√©, des frigos, des produits frais, du mat√©riel,
ainsi que des actions √† r√©aliser chaque jour.

11.15.1 Fonctionnalit√©s principales
Le module Caf√© doit permettre :
1. Le contr√¥le de la propret√© de la cuisine.
2. Le relev√© quotidien des r√©frig√©rateurs (temp√©rature, √©tat, stock frais).
3. La gestion des sorties de madeleines et cakes (quantit√©s du jour).
4. La v√©rification et le suivi de l‚Äô√©tat de la machine (machine √† caf√©, four, lave-
   vaisselle‚Ä¶).
5. Le contr√¥le des stocks de compote, yaourt et autres produits
   consommables frais.
6. L‚Äôajout automatique de t√¢ches en cas de manque, probl√®me ou anomalie.
7. La tra√ßabilit√© du responsable ayant effectu√© les contr√¥les.
8. Des exports journaliers/hebdomadaires.

11.15.2 Propret√© de la cuisine
Le personnel Caf√© doit pouvoir effectuer un relev√© quotidien incluant :
- Nettoyage du plan de travail.
- √âtat de la plonge.
- √âtat du sol.
- √âtat du mat√©riel de cuisson.
- √âtat des poubelles.
- Propret√© des frigos (ext√©rieur et int√©rieur).
- √âtat g√©n√©ral de la zone client√®le (tables, chaises).

Chaque point doit √™tre :
- not√© (exemple : conforme / non conforme),
- comment√© si n√©cessaire.

Si ‚Äúnon conforme‚Äù est s√©lectionn√©, le syst√®me doit :
- cr√©er automatiquement une t√¢che interne,
- assigner la t√¢che selon le type de probl√®me (caf√©, maintenance, m√©nage),
- garder une trace de l‚Äôincident dans l‚Äôhistorique du caf√©.

11.15.3 Relev√© des frigos
Pour chaque r√©frig√©rateur du caf√©, le syst√®me doit permettre de saisir :
- Temp√©rature actuelle (obligatoire).
- Seuils d‚Äôalerte (min et max d√©finis en admin).
- √âtat g√©n√©ral (propre, √† nettoyer, probl√®me d‚Äôodeur, givre).
- Pr√©sence et quantit√© des produits cl√©s :
  - Compote,
  - Yaourts,
  - Jus,
  - G√¢teaux frais,
  - P√¢tes fra√Æches ou mang√©es la veille,
  - √âl√©ments sp√©cifiques aux ateliers gourmets (si applicable).

Si la temp√©rature d√©passe les seuils configur√©s, une alerte doit √™tre g√©n√©r√©e.
Si un produit est en quantit√© insuffisante (param√©trable), le syst√®me doit :
- g√©n√©rer automatiquement une t√¢che de r√©assort,
- mettre en surbrillance le frigo dans l‚Äôadmin,
- notifier le responsable si configur√©.

11.15.4 Sortie des madeleines et cakes
Le caf√© doit pouvoir enregistrer chaque jour :
- Quantit√© de madeleines sorties,
- Quantit√© de cakes ou portions sorties,
- Heure de sortie,
- Personne responsable,
- Date limite de consommation (si applicable).

Cette fonctionnalit√© doit :
- alimenter le suivi des stocks du module 11.4,
- g√©n√©rer une alerte si le stock frais est insuffisant,
- permettre un export journalier ou hebdomadaire des produits servis.

11.15.5 V√©rification de la machine (contr√¥le mat√©riel caf√©)
Le syst√®me doit permettre une check-list d√©di√©e √† la machine principale du
caf√© :
Machine √† caf√© :
- niveau d‚Äôeau,
- capsules ou grains,
- nettoyage du porte-filtre,
- √©tat des buses,
- vidage des bacs √† marc,
- rin√ßage obligatoire en fin de journ√©e.

Four :
- √©tat int√©rieur,
- nettoyage des plaques.

Lave-vaisselle :
- niveau produit lessiviel,
- filtre propre,
- cycle obligatoire √† vide.

Chaque √©l√©ment doit √™tre not√© comme :
- Conforme,
- √Ä v√©rifier,
- Hors service.

Lorsque l‚Äô√©tat est ‚Äú√Ä v√©rifier‚Äù ou ‚ÄúHors service‚Äù, une t√¢che doit √™tre cr√©√©e
automatiquement.

11.15.6 Check compote, yaourts et produits frais
Le personnel Caf√© doit pouvoir d√©clarer quotidiennement :
- Quantit√© restante de compotes,
- Quantit√© restante de yaourts,
- Quantit√© restante de jus individuels,
- Expiration des produits,
- Produits manquants,
- Conditionnement ouvert ou non conforme.

Pour chaque produit, l‚Äôadministrateur doit pouvoir d√©finir :
- une quantit√© minimale (seuil),
- une alerte automatique si inf√©rieur,
- une p√©riodicit√© de v√©rification (par d√©faut quotidienne).

Relev√©s et √©carts doivent √™tre archiv√©s.

11.15.7 Tableau et historique Caf√©
Un tableau Caf√© doit √™tre accessible aux responsables et administrateurs,
regroupant :
- Contr√¥les frigos du jour,
- Temp√©ratures frigo,
- Produits manquants,
- Historique des non-conformit√©s,
- Suivi de la machine (notes, incidents),
- Suivi propret√© cuisine,
- T√¢ches g√©n√©r√©es,
- Historique des sorties madeleines/cakes,
- Expirations de produits frais,
- P√©riodes de p√©nurie r√©currentes (statistiques).

Export disponible en CSV / Excel :
- Journalier,
- Hebdomadaire,
- Mensuel.

11.15.8 Permissions et visibilit√©
R√¥les et droits pour ce module :
R√¥le Caf√© :
- Acc√®s complet au module Caf√©,
- Saisie et modification des relev√©s du jour,
- Consultation des historiques.

Responsable / Manager :
- Acc√®s complet,
- Validation des relev√©s,
- Attribution des t√¢ches,
- Acc√®s aux statistiques.

Administrateur :
- Acc√®s complet,
- Param√©trage des seuils,
- Gestion des alertes,
- Ajout / suppression des items de contr√¥le,
- Gestion des utilisateurs Caf√©.

Animateur :
- Aucun acc√®s, sauf si d√©cid√© ult√©rieurement

11.15.9 Int√©gration avec le module de t√¢ches internes
Chaque anomalie ou incident d√©tect√© dans le module Caf√© doit cr√©er
automatiquement une t√¢che (voir section 12), avec :
- description automatique g√©n√©r√©e,
- priorit√© d√©finie selon le type d‚Äôincident (ex : frigo hors temp√©rature = haute),
- assignation automatique au r√¥le ou utilisateur appropri√© (Caf√©,
  Maintenance, Responsable),
- lien avec la fiche Caf√© du jour,
- historique horodat√©.

üßæ CAHIER DES CHARGES ‚Äì SYST√àME DE R√âSERVATION DJOGO
